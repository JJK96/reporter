\ProvidesClass{pentest}[2022/01/25 pentest report]
\LoadClass{report}

\numfindings{\VAR{num_issues}}
\numcritical{\VAR{num_severity.critical}}
\numhigh{\VAR{num_severity.high}}
\nummedium{\VAR{num_severity.medium}}
\numlow{\VAR{num_severity.low}}
\numnone{\VAR{num_severity.none}}

\findingtable
\BLOCK{ for severity, issues in issues.items() }
{
    \BLOCK{ for issue in issues }
    Finding \VAR{issue.number} \VAR{issue.title} \\
    \BLOCK{ endfor }
}
\BLOCK{ endfor }

\AtBeginDocument{
    \togglefalse{tpage}
    \maketitle

    \setcounter{page}{2}

    \tableofcontents

    \newpage

    \input{management_summary.tex}

    \newpage

    \input{introduction.tex}

    \newpage

    \input{results.tex}
}
